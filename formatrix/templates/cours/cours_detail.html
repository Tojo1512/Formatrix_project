{% extends "base.html" %}
{% load static %}

{% block title %}{{ cours.nom_cours }} - Course Details{% endblock %}

{% block content %}
<div class="course-detail-container">
    <div class="course-header">
        <div class="course-title">
            <h1>{{ cours.nom_cours }}</h1>
            <span class="badge {% if cours.statut_approbation == 'APPROUVE' %}badge-success{% elif cours.statut_approbation == 'EN_ATTENTE' %}badge-warning{% else %}badge-danger{% endif %}">
                {{ cours.get_statut_approbation_display }}
            </span>
        </div>
        <div class="header-actions">
            <a href="{% url 'cours-update' cours.cours_id %}" class="btn btn-primary">
                <i class="fas fa-edit"></i>
                Edit Course
            </a>
            <a href="{% url 'cours-list' %}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i>
                Back to List
            </a>
        </div>
    </div>

    <div class="course-content">
        <div class="content-section">
            <h2>Course Information</h2>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">Duration</span>
                    <span class="info-value">{{ cours.duree }} hours</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Type</span>
                    <span class="info-value">{{ cours.get_type_cours_display }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Status</span>
                    <span class="info-value">{{ cours.get_statut_approbation_display }}</span>
                </div>
                {% if cours.date_approbation %}
                <div class="info-item">
                    <span class="info-label">Approval Date</span>
                    <span class="info-value">{{ cours.date_approbation|date:"F j, Y" }}</span>
                </div>
                {% endif %}
                {% if cours.date_expiration %}
                <div class="info-item">
                    <span class="info-label">Expiration Date</span>
                    <span class="info-value">{{ cours.date_expiration|date:"F j, Y" }}</span>
                </div>
                {% endif %}
            </div>
        </div>

        <div class="content-section">
            <h2>Description</h2>
            <div class="text-content">
                {{ cours.description|linebreaks }}
            </div>
        </div>

        {% if cours.prerequis %}
        <div class="content-section">
            <h2>Prerequisites</h2>
            <div class="text-content">
                {{ cours.prerequis|linebreaks }}
            </div>
        </div>
        {% endif %}

        <div class="content-section">
            <h2>Learning Objectives</h2>
            <div class="text-content">
                {{ cours.objectifs|linebreaks }}
            </div>
        </div>

        {% if cours.commentaires %}
        <div class="content-section">
            <h2>Comments</h2>
            <div class="text-content">
                {{ cours.commentaires|linebreaks }}
            </div>
        </div>
        {% endif %}

        {% if cours.statut_approbation == 'EN_ATTENTE' and perms.formatrix.can_approve_cours %}
        <div class="approval-actions">
            <h2>Approval Actions</h2>
            <div class="action-buttons">
                <form method="post" action="{% url 'cours-approuver' cours.cours_id %}" class="inline-form">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-success">
                        <i class="fas fa-check"></i>
                        Approve Course
                    </button>
                </form>
                <form method="post" action="{% url 'cours-refuser' cours.cours_id %}" class="inline-form">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger">
                        <i class="fas fa-times"></i>
                        Reject Course
                    </button>
                </form>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/detail.css' %}">
{% endblock %}
