{% extends "base.html" %}
{% load static %}

{% block title %}
  {% if form.instance.pk %}Modifier le lieu{% else %}Créer un lieu{% endif %} - Formatrix
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/forms.css' %}">
{% endblock %}

{% block content %}
<div class="form-container">
  <div class="form-header">
    <h2 class="form-title">
      {% if form.instance.pk %}
        Modifier le lieu
      {% else %}
        Créer un nouveau lieu
      {% endif %}
    </h2>
  </div>

  <form method="post" class="form-content">
    {% csrf_token %}
    
    {% if form.errors %}
    <div class="alert alert-danger">
      <h4 class="alert-heading">Des erreurs ont été trouvées dans le formulaire</h4>
      <ul>
        {% for field in form %}
          {% for error in field.errors %}
            <li><strong>{{ field.label }}:</strong> {{ error }}</li>
          {% endfor %}
        {% endfor %}
        {% for error in form.non_field_errors %}
          <li>{{ error }}</li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}
    
    <div class="form-section">
      <div class="form-group">
        <label for="{{ form.lieu.id_for_label }}">Nom du lieu</label>
        {{ form.lieu }}
        {% if form.lieu.help_text %}
          <small class="form-text text-muted">{{ form.lieu.help_text }}</small>
        {% endif %}
      </div>

      <div class="form-group">
        <label for="{{ form.adresse.id_for_label }}">Adresse complète</label>
        {{ form.adresse }}
        {% if form.adresse.help_text %}
          <small class="form-text text-muted">{{ form.adresse.help_text }}</small>
        {% endif %}
      </div>

      <div class="form-group">
        <label for="{{ form.personne_contact.id_for_label }}">Personne de contact</label>
        {{ form.personne_contact }}
        {% if form.personne_contact.help_text %}
          <small class="form-text text-muted">{{ form.personne_contact.help_text }}</small>
        {% endif %}
      </div>

      <div class="form-group">
        <label for="{{ form.telephone.id_for_label }}">Téléphone</label>
        {{ form.telephone }}
        {% if form.telephone.help_text %}
          <small class="form-text text-muted">{{ form.telephone.help_text }}</small>
        {% endif %}
      </div>

      <div class="form-group">
        <label for="{{ form.mobile.id_for_label }}">Mobile</label>
        {{ form.mobile }}
        {% if form.mobile.help_text %}
          <small class="form-text text-muted">{{ form.mobile.help_text }}</small>
        {% endif %}
      </div>
    </div>

    <div class="form-actions">
      <a href="{{ request.GET.next|default:'/' }}" class="btn btn-outline">Annuler</a>
      <button type="submit" class="btn btn-primary">
        {% if form.instance.pk %}
          Mettre à jour
        {% else %}
          Créer
        {% endif %}
      </button>
    </div>
  </form>
</div>
{% endblock %} 